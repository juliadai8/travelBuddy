(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{6148:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/MyProfile",function(){return i(6312)}])},6652:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(5893),a=i(7294),r=i(1664),s=i.n(r);i(3098);var l=i(3194),o=i(1259),d=()=>{let[e,t]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=l.ZP.getAuth().onAuthStateChanged(e=>{e?t(!0):t(!1)});return()=>e()},[e]);let i=async()=>{let e=new o.hJ;e.setCustomParameters({prompt:"select_account"});try{let i=(await (0,o.rh)(l.ZP.getAuth(),e)).user;i&&(i.uid,t(!0),localStorage.setItem("user",JSON.stringify(i.email))),window.location.reload()}catch(e){console.error(e)}},r=async()=>{try{await (0,o.w7)(l.ZP.getAuth()),localStorage.setItem("user",""),t(!1),window.location.reload()}catch(e){console.error(e)}};return(0,n.jsx)("div",{children:e?(0,n.jsx)("button",{onClick:r,children:"Sign out"}):(0,n.jsx)("button",{onClick:i,children:"Sign in with Google"})})};i(5636),i(8842);var c=()=>{let[e,t]=(0,a.useState)(void 0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("theme");var i=document.body;"dark"===e?(i.classList.add("dark-mode"),t(!0)):(i.classList.remove("dark-mode"),t(!1))},[]),void 0===e)?null:(0,n.jsxs)("header",{id:"navbar",children:[(0,n.jsx)(s(),{href:"/",className:"link",children:(0,n.jsx)("div",{className:"navbar-start",style:{fontFamily:"Arial",fontSize:"18px"},children:"Travel Buddy"})}),(0,n.jsxs)("div",{className:"navbar-end",style:{display:"flex"},children:[(0,n.jsx)(s(),{href:"/MyProfile",className:"link",children:(0,n.jsx)("div",{className:"navbar-start",style:{fontFamily:"Arial",fontSize:"18px",paddingRight:"20px",justifyContent:"space-between",paddingTop:"10px"},children:"My Destinations"})}),(0,n.jsxs)("label",{className:"switch",children:[(0,n.jsx)("input",{id:"darkmode-button",defaultChecked:e,onClick:()=>{var i=document.body;e?(i.classList.remove("dark-mode"),localStorage.setItem("theme","light")):(i.classList.add("dark-mode"),localStorage.setItem("theme","dark")),t(e=>!e)},type:"checkbox"}),(0,n.jsx)("span",{className:"slider round"})]}),(0,n.jsx)(d,{})]})]})}},6312:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var n=i(5893),a=i(7294);i(4249);var r=i(8429),s=i(7576),l=i(9603),o=i(9417),d=i(3194),c=i(6156),u=e=>{let{country:t,city:i,imgURL:u,onReadMore:h,isLoggedIn:v,review:m,myRating:g,averageRating:x,destinationID:w,reviewID:j,reviewDelete:f,reviewSubmit:y,reviewUpdate:p,user:S,visitedHandling:C}=e,[N,b]=(0,a.useState)(!1),[k,Z]=(0,a.useState)(g||0),[R,A]=(0,a.useState)(m),[P,D]=(0,a.useState)(x),[I,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{new d.ZP().getDestination(w).then(e=>{D((null==e?void 0:e.RatingCount)==0?0:(null==e?void 0:e.TotalRating)/(null==e?void 0:e.RatingCount)),E(!1)})},[I]);let L=()=>{j&&(f(w,j),Z(2.5),A(""),E(!0),b(!1))},_=e=>{A(e.target.value)},O=()=>{p(w,j,k,R),b(!1),E(!0)},T=()=>{y(w,k,R),E(!0)},U=()=>{b(!1)};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"outer-box",children:(0,n.jsxs)("div",{className:"box",id:"box",children:[(0,n.jsx)("img",{src:u,alt:"Error loading image",className:"inner-div"}),(0,n.jsxs)("div",{className:"inner-div info-div",children:[(0,n.jsx)("h1",{children:i}),(0,n.jsx)("h2",{children:t})]}),(0,n.jsxs)("div",{className:"inner-div more-div",children:[(0,n.jsx)("div",{className:"rating-container",children:(0,n.jsx)(s.Z,{name:"half-rating",value:P,precision:.25,readOnly:!0})}),(0,n.jsxs)("div",{className:"weather-container",children:[(0,n.jsx)("div",{style:{marginRight:"10px"},children:void 0!==S&&(0,n.jsx)(c.Z,{user:S,id:w,extraHandling:C})}),(0,n.jsx)(r.Z,{country:t,city:i})]})]})]})}),(0,n.jsx)("div",{className:"review-container",id:"review",children:N?(0,n.jsxs)("div",{id:"edit-container",children:["Edit your review:",(0,n.jsx)("div",{id:"starRating",className:"not-blur",children:(0,n.jsx)(s.Z,{name:"half-rating",defaultValue:g,precision:.5,onChange:(e,t)=>Z(t)})}),(0,n.jsx)("textarea",{id:"review-destinations",rows:1,onChange:_,defaultValue:m}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l.G,{id:"back-review",className:"not-blur",icon:o.a0w,onClick:()=>U()}),(0,n.jsx)(l.G,{id:"update-review",className:"not-blur",icon:o.fV7,onClick:()=>O()}),(0,n.jsx)(l.G,{id:"delete-review",className:"not-blur",icon:o.Vui,onClick:()=>{confirm("Are you sure you want to delete this review?\nClick either OK or Cancel.")&&L()}})]})]}):g?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{id:"top-half-review",children:[(0,n.jsxs)("h3",{children:["Your review for ",i]}),(0,n.jsx)(l.G,{id:"edit-button",className:"not-blur",icon:o.Yai,onClick:()=>b(!0)})]}),(0,n.jsx)(s.Z,{name:"half-rating",value:g,precision:.5,readOnly:!0}),m&&(0,n.jsx)("p",{children:m})]}):(0,n.jsxs)("div",{id:"edit-container",children:["Add review:",(0,n.jsx)("div",{id:"starRating",className:"not-blur",children:(0,n.jsx)(s.Z,{name:"half-rating",defaultValue:2.5,precision:.5,onChange:(e,t)=>Z(t)})}),(0,n.jsx)("textarea",{id:"review-destinations",rows:1,onChange:_,placeholder:"Optional comment"}),(0,n.jsx)("button",{id:"submit-review",className:"addPadding not-blur",onClick:()=>T(),children:"Submit"})]})})]})},h=i(8350);i(5428);var v=i(9332),m=i(343),g=i(6424),x=i(6652),w=()=>{let[e,t]=(0,a.useState)([]),[i,r]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(0),[w,j]=(0,a.useState)(0),[f,y]=(0,a.useState)(""),[p,S]=(0,a.useState)(!1),[C,N]=(0,a.useState)(!1);(0,v.useRouter)();let[b,k]=(0,a.useState)(),[Z,R]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[D,I]=(0,a.useState)("");(0,a.useEffect)(()=>{var e;I(null===(e=localStorage.getItem("user"))||void 0===e?void 0:e.replace(/"/g,""))},[]),(0,a.useEffect)(()=>{d.I8.onAuthStateChanged(e=>{e?k(e):(k(void 0),l(!1),S(!1))}),"theamariabruno@gmail.com"===D||"juliadai03@gmail.com"===D||"adrianhsolberg@gmail.com"===D?P(!0):P(!1)},[C,Z,D]);let E=async(e,t)=>{let i=new d.ZP;return await i.getReviewForDestinationUser(e,t)};(0,a.useEffect)(()=>{let e=new d.ZP;d.I8.onAuthStateChanged(t=>{if(t){let i=t.uid,n=e.getDestinationIDsForUser(i);e.getVisitedDestinations(n).then(async e=>{let t=JSON.parse(JSON.stringify(e)),i=await Promise.all(t.map(async e=>{let t=await E(null==b?void 0:b.uid,e.id);return t&&t.length>0?{rating:t[0].rating,comment:t[0].comment,reviewID:t[0].reviewID,...e}:{rating:null,comment:null,reviewID:null,...e}}));N(!1),r(i)})}})},[b,C]);let L=(e,t)=>{if(void 0===t||null==t||t.length<=0)return e;let i=t.map(e=>e.toLowerCase());return e.filter(e=>{let t=e.category.map(e=>e.toLowerCase());return i.every(e=>t.includes(e))})},_=(e,t)=>e.filter(e=>{let i=t.toLowerCase(),n=e.city.toLowerCase(),a=e.country.toLowerCase(),r=Array.isArray(e.category)?e.category.map(e=>e.toLowerCase()):[];return!i||n.includes(i)||a.includes(i)||r.some(e=>e.includes(i))}),O=(e,t,i)=>{let n=_(e,t),a=_(e,i);return n.length>0&&a.length>0},T=(e,t)=>{new d.ZP().deleteReview(e,t).then(()=>{N(!0)})},U=async(e,t,i)=>{if(b){let n=new d.ZP;await n.addReview(e,t,i||"",b.email,b.uid),N(!0)}},F=(e,t,i,n)=>{t&&new d.ZP().updateReview(e,t,i,n||"").then(()=>{N(!0)})},V=()=>{N(!0)},G=()=>{c(0),l(!1),window.scrollTo(0,w),j(0)},H=()=>{S(!1),N(!0),window.scrollTo(0,w)};return(0,n.jsxs)("div",{id:"container",className:s||p?"blur-background":void 0,children:[(0,n.jsx)(x.Z,{}),(0,n.jsxs)("div",{className:"header-padding",id:"headline",children:[(0,n.jsx)("div",{id:"header-div",children:(0,n.jsx)("p",{className:"headline",id:"headline",children:"Your visited destinations"})}),(s||p)&&(0,n.jsx)("div",{className:"overlay"}),(0,n.jsx)("div",{id:"search-div",children:(0,n.jsx)("input",{type:"text",value:f,onChange:e=>{y(e.target.value)},placeholder:"Search destinations"})}),(0,n.jsx)("div",{id:"filter-container",className:"filter-container",children:(0,n.jsx)(h.Z,{categories:{Activities:["Hiking","Skiing","Sightseeing"],Climate:["Tropical","Dry","Continental","Polar","Temperate"],"Destination type":["City","Beach","Culture","Safari","Historical","Active"],Continent:["Europe","Asia","Africa","North America","South America","Oceania"]},onFilterChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t(e)}})}),s&&b&&(0,n.jsx)(m.Z,{id:_(L(i,e),f)[o].id,city:_(L(i,e),f)[o].city,country:_(L(i,e),f)[o].country,rating:_(L(i,e),f)[o].rating,tags:_(L(i,e),f)[o].category,description:_(L(i,e),f)[o].description,imgURL:_(L(i,e),f)[o].imgUrl,user:b,admin:A,onClose:()=>G()}),(0,n.jsx)("div",{id:"feed-container",children:(()=>{let t=_(L(i,e),f);return 0===t.length?(0,n.jsx)("h1",{children:"No destinations found"}):(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>(0,n.jsx)(u,{city:e.city,country:e.country,imgURL:e.imgUrl,review:e.comment,myRating:e.rating,isLoggedIn:!!b,averageRating:0==e.RatingCount?0:e.TotalRating/e.RatingCount,destinationID:e.id,reviewID:e.reviewID,reviewDelete:T,reviewSubmit:U,reviewUpdate:F,user:b,visitedHandling:V},t))})})()}),p&&(0,n.jsx)(g.Z,{checkDuplicates:(e,t)=>O(i,e,t),destinationList:i,onClose:()=>H()})]})]})}},8842:function(){},3098:function(){},4249:function(){},5636:function(){}},function(e){e.O(0,[16,211,976,870,746,664,518,888,774,179],function(){return e(e.s=6148)}),_N_E=e.O()}]);