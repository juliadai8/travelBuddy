(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{3605:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/HomePage",function(){return i(6300)}])},6300:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=i(5893),a=i(7294);i(7299);var l=i(8429),s=i(7576),r=i(6156),o=e=>{let{country:t,city:i,rating:o,imgURL:c,onReadMore:d,isLoggedIn:u,user:h,id:g}=e,[m,x]=(0,a.useState)({state:!1});return(0,n.jsxs)("div",{className:"box",id:"box",onClick:u?d:()=>alert("Please log in to read more"),children:[(0,n.jsx)("img",{src:c,alt:"Error loading image",className:"inner-div"}),(0,n.jsxs)("div",{className:"inner-div info-div",children:[(0,n.jsx)("h1",{children:i}),(0,n.jsx)("h2",{children:t})]}),(0,n.jsxs)("div",{className:"inner-div more-div",children:[(0,n.jsx)("div",{className:"rating-container",children:(0,n.jsx)(s.Z,{"data-testid":"rating",name:"average-rating",value:o,precision:.25,readOnly:!0})}),(0,n.jsx)("div",{className:"weather-container",children:(0,n.jsx)(l.Z,{country:t,city:i})}),(0,n.jsxs)("div",{className:"button-container",children:[void 0!==h&&(0,n.jsx)(r.Z,{user:h,id:g,extraHandling:()=>{}}),(0,n.jsx)("button",{onClick:u?d:()=>alert("Please log in to read more"),children:"Read More"})]})]})]})},c=i(8350),d=i(3194);i(5428);var u=i(9332),h=i(343),g=i(6424);i(9883);var m=e=>{let{id:t,city:i,country:l,tags:s,currentDescription:r,currentImgUrl:o,onClose:c}=e,u=new d.ZP,[h,g]=(0,a.useState)(""),[m,x]=(0,a.useState)(o),[j,v]=(0,a.useState)(r),[f,p]=(0,a.useState)(""),[b,y]=(0,a.useState)(s),[N,C]=(0,a.useState)(!1),w={Activities:["Hiking","Skiing","Sightseeing"],"Destination type":["City","Beach","Culture","Safari","Historical","Active"]},S=["continental","dry","polar","temperate","tropical"],k=e=>{g(e),y(e=>e.filter(e=>!S.includes(e))),y(t=>[...t,e])},D=()=>{for(let e=0;e<b.length;e++)if(!s.includes(b[e]))return!0;for(let e=0;e<s.length;e++)if(!b.includes(s[e]))return!0;return""!=h||r!=j},E=async()=>{D()?(await u.editDestination(t,m,b,j),null==c||c()):p("No changes were made")},_=e=>b.indexOf(e)>-1;return(0,n.jsxs)("div",{id:"editBox",className:"not-blur",children:[(0,n.jsx)("h1",{className:"not-blur",children:"Edit destination"}),(0,n.jsx)("h5",{id:"statusmessage",className:"not-blur",children:f}),(0,n.jsx)("button",{id:"x-button",onClick:c,className:"not-blur",children:"X"}),(0,n.jsxs)("div",{id:"editDestination",className:"not-blur",children:[(0,n.jsxs)("div",{id:"display-current-destination",className:"not-blur",children:[(0,n.jsx)("img",{src:m,alt:"Error",className:"not-blur"}),(0,n.jsxs)("h2",{className:"not-blur",children:[i,", ",l]})]}),(0,n.jsxs)("div",{id:"editDestination-inner",className:"not-blur",children:[(0,n.jsxs)("form",{className:"not-blur",children:[(0,n.jsxs)("label",{className:"not-blur",children:["Image url:",(0,n.jsx)("input",{name:"imgURL",id:"imgURL",className:"not-blur",onChange:e=>x(e.target.value)})]}),(0,n.jsxs)("select",{className:"not-blur",defaultValue:"",onChange:e=>k(e.target.value),children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"climate"}),(0,n.jsx)("option",{value:"continental",children:"Continental"}),(0,n.jsx)("option",{value:"dry",children:"Dry"}),(0,n.jsx)("option",{value:"polar",children:"Polar"}),(0,n.jsx)("option",{value:"temperate",children:"Temperate"}),(0,n.jsx)("option",{value:"tropical",children:"Tropical"})]}),(0,n.jsx)("div",{className:"not-blur",id:"edit-checkboxes",children:(()=>{let e=e=>{let t=e.target.value;e.target.checked?b.includes(t)||y(e=>[...e,t]):y(e=>e.filter(e=>e!==t))};return(0,n.jsx)(n.Fragment,{children:Object.entries(w).map(t=>{let[i,a]=t;return(0,n.jsxs)("div",{className:"not-blur",children:[(0,n.jsx)("h4",{className:"not-blur",children:i}),(0,n.jsx)("div",{className:"not-blur",id:"category-checkbox-container",children:a.map(t=>(0,n.jsxs)("label",{className:"not-blur",children:[(0,n.jsx)("input",{type:"checkbox",className:"not-blur",defaultChecked:_(t),value:t,onChange:e}),t]},t))})]},i)})})})()})]}),(0,n.jsx)("h4",{className:"not-blur",children:"Description"}),(0,n.jsx)("textarea",{className:"not-blur",defaultValue:r,rows:12,cols:60,style:{resize:"none"},onChange:e=>v(e.target.value)}),(0,n.jsx)("button",{id:"editButton",className:"not-blur",onClick:E,children:"Update destination"})]})]})]})},x=i(6650);i(4477);var j=e=>{let{admin:t}=e,[i,l]=(0,a.useState)(void 0);return(0,n.jsxs)("div",{id:"fileUploader",children:[t&&(0,n.jsx)("input",{type:"file",onChange:e=>{e.target.files&&e.target.files.length>0&&l(e.target.files[0])},accept:".png, .jpg, .gif"}),t&&(0,n.jsx)("button",{onClick:()=>{if(!i){alert("Please choose a file first!");return}let e=new Date().getTime(),t="".concat(e,"_").concat(i.name),n=(0,x.iH)(d.tO,"/files/".concat(t)),a=new Blob([i]),l=(0,x.B0)(n,a);l.on("state_changed",e=>{e.bytesTransferred,e.totalBytes},e=>console.log(e),async()=>{await (0,x.Jt)(l.snapshot.ref),window.location.reload()})},children:"Upload ad"})]})};i(8958);var v=i(9417),f=i(9603),p=e=>{let{admin:t}=e,[i,l]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,x.cF)(),t=(0,x.iH)(e,"files/");(0,x.aF)(t).then(e=>{Promise.all(e.items.map(e=>(0,x.Jt)(e).catch(e=>(console.log(e),"")))).then(e=>l(e.filter(e=>""!==e))).catch(e=>console.log(e))}).catch(e=>console.log(e))},[]);let s=e=>{let t=(0,x.cF)(),i=(0,x.iH)(t,e);(0,x.oq)(i).then(()=>{console.log("File deleted successfully"),l(t=>t.filter(t=>t!==e))}).catch(e=>{console.error("Error deleting file: ",e)})},r=i.slice().reverse();return(0,n.jsx)("div",{id:"adColumn",children:r.map((e,i)=>(0,n.jsxs)("div",{id:"delete",children:[(0,n.jsx)("img",{src:e,alt:"File ".concat(i+1)}),t&&(0,n.jsx)("button",{onClick:()=>s(e),children:(0,n.jsx)(f.G,{id:"icon",className:"not-blur",icon:v.Vui})})]},i))})},b=()=>{let[e,t]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[s,r]=(0,a.useState)(!1),[x,v]=(0,a.useState)(0),[f,b]=(0,a.useState)(0),[y,N]=(0,a.useState)(""),[C,w]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[D,E]=(0,a.useState)(!1);(0,u.useRouter)();let[_,R]=(0,a.useState)(),[T,P]=(0,a.useState)(!1),[U,A]=(0,a.useState)(!1),[L,H]=(0,a.useState)(""),[Z,B]=(0,a.useState)(null);(0,a.useEffect)(()=>{var e;H(null===(e=localStorage.getItem("user"))||void 0===e?void 0:e.replace(/"/g,""))},[]),(0,a.useEffect)(()=>{d.I8.onAuthStateChanged(e=>{e?R(e):(R(void 0),r(!1),w(!1),E(!1))}),"theamariabruno@gmail.com"===L||"juliadai03@gmail.com"===L||"adrianhsolberg@gmail.com"===L||"hallvardfuttererwannebo@gmail.com"===L||"sand.rasmusw@gmail.com"===L?A(!0):A(!1)},[S,T,L]),(0,a.useEffect)(()=>{new d.ZP().getDestinations().then(e=>{l(e),k(!1)})},[S]);let F=e=>{v(e),r(!0),b(window.scrollY),window.scrollTo(0,0)},O=(e,t)=>{if(void 0===t||null==t||t.length<=0)return e;let i=t.map(e=>e.toLowerCase());return e.filter(e=>{let t=e.category.map(e=>e.toLowerCase());return i.every(e=>t.includes(e))})},I=(e,t)=>e.filter(e=>{let i=t.toLowerCase(),n=e.city.toLowerCase(),a=e.country.toLowerCase();return!i||n.includes(i)||a.includes(i)}),V=(e,t,i)=>{let n=I(e,t),a=I(e,i);return n.length>0&&a.length>0},X=()=>{v(0),r(!1),window.scrollTo(0,f),b(0),k(!0)},J=()=>{w(!1),k(!0),window.scrollTo(0,f)},M=()=>{E(!0),r(!1)},q=()=>{E(!1),k(!0)},z=e=>{(new d.ZP).deleteDestination(e),k(!0),X()},G=I(O(i,e),y)[x];return(0,n.jsxs)("div",{id:"container",className:s||C||D?"blur-background":void 0,children:[(s||C||D)&&(0,n.jsx)("div",{className:"overlay"}),s&&_&&(0,n.jsx)(h.Z,{id:G.id,city:G.city,country:G.country,rating:0==G.RatingCount?0:G.TotalRating/G.RatingCount,tags:G.category,description:G.description,imgURL:G.imgUrl,user:_,admin:U,onEdit:()=>M(),onDelete:()=>z(I(O(i,e),y)[x].id),onClose:()=>X()}),D&&(0,n.jsx)(m,{city:G.city,country:G.country,tags:G.category,currentDescription:G.description,currentImgUrl:G.imgUrl,id:G.id,onClose:()=>q(),visited:G.visited}),!!_&&(0,n.jsx)("button",{id:"addDestinationButton",onClick:()=>w(!0),disabled:s||C,className:s||C?"disable-button":void 0,children:"Add new travel destination"}),(0,n.jsx)("div",{id:"search-container",children:(0,n.jsx)("input",{type:"text",value:y,onChange:e=>{N(e.target.value)},placeholder:"Search destinations"})}),(0,n.jsx)("div",{id:"filter-container",children:(0,n.jsx)(c.Z,{categories:{Activities:["Hiking","Skiing","Sightseeing"],Climate:["Tropical","Dry","Continental","Polar","Temperate"],"Destination type":["City","Beach","Culture","Safari","Historical","Active"],Continent:["Europe","Asia","Africa","North America","South America","Oceania"]},onFilterChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t(e)}})}),(0,n.jsx)("div",{id:"fileUploader",children:(0,n.jsx)(j,{admin:U})}),(0,n.jsx)("div",{id:"ad-container",children:(0,n.jsx)("div",{id:"displayAds",children:(0,n.jsx)(p,{admin:U})})}),(0,n.jsx)("div",{id:"feed-container",children:(()=>{let t=I(O(i,e),y);return 0===t.length?(0,n.jsx)("h1",{children:"No destinations found"}):(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>(0,n.jsx)(o,{city:e.city,country:e.country,rating:0==e.RatingCount?0:e.TotalRating/e.RatingCount,imgURL:e.imgUrl,onReadMore:()=>F(t),isLoggedIn:!!_,user:_,id:e.id},t))})})()}),C&&(0,n.jsx)(g.Z,{checkDuplicates:(e,t)=>V(i,e,t),destinationList:i,onClose:()=>J()})]})}},7299:function(){},9883:function(){},4477:function(){},8958:function(){}},function(e){e.O(0,[16,211,976,870,746,518,888,774,179],function(){return e(e.s=3605)}),_N_E=e.O()}]);