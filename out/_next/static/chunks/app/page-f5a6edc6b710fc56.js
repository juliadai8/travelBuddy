(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2880:function(e,t,i){Promise.resolve().then(i.bind(i,3438))},2619:function(e,t,i){"use strict";i.d(t,{I8:function(){return d},tO:function(){return c}});var n=i(6142),a=i(2730),s=i(4905),r=i(8121);let l=(0,n.ZF)({apiKey:"AIzaSyBWui1W0CBRAzvrMqHCOBUc3hMkmo3KkXw",authDomain:"tdt4140-prosjekt.firebaseapp.com",databaseURL:"https://tdt4140-prosjekt-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tdt4140-prosjekt",storageBucket:"tdt4140-prosjekt.appspot.com",messagingSenderId:"807771308285",appId:"1:807771308285:web:43ebb655b020317c987e94"}),o=(0,r.ad)(l),c=(0,s.cF)(l),d=(0,a.v0)(l);class u{static getAuth(){return d}static getStorage(){return c}async getDestinations(){let e=(0,r.hJ)(o,"destinations");return(await (0,r.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}async getDestination(e){let t=(0,r.JU)(o,"destinations",e);return(await (0,r.QT)(t)).data()}async getReviewForDestinationUser(e,t){let i=(0,r.hJ)(o,"destinations",t,"reviews");return(await (0,r.PL)(i)).docs.map(e=>({reviewID:e.id,...e.data()})).filter(t=>t.userID===e)}async getReviewsForDestination(e){let t=(0,r.hJ)(o,"destinations",e,"reviews");return(await (0,r.PL)(t)).docs.map(e=>({reviewID:e.id,...e.data()}))}async addDestination(e,t,i,n,a){let s=(0,r.hJ)(o,"destinations");try{let l=await (0,r.ET)(s,{city:e,country:t,imgUrl:i,category:n,description:a||"",RatingCount:0,TotalRating:0}),o=(0,r.hJ)(l,"reviews");await (0,r.ET)(o,{})}catch(e){console.error(e)}}async getDestinationIDsForUser(e){let t=(0,r.hJ)(o,"user_destinations"),i=(0,r.IO)(t,(0,r.ar)("userID","==",e));return(await (0,r.PL)(i)).docs.map(e=>e.data().destinationID)}async getVisitedDestinations(e){let t=await e;if(0==t.length||null==t||void 0==t)return[];let i=(0,r.hJ)(o,"destinations"),n=(0,r.IO)(i,(0,r.ar)((0,r.Jm)(),"in",t));return(await (0,r.PL)(n)).docs.map(e=>({id:e.id,...e.data()}))}async editDestination(e,t,i,n){let a=(0,r.JU)(o,"destinations",e);try{await (0,r.r7)(a,{imgUrl:t,category:i,description:n})}catch(e){console.error(e)}}async deleteDestination(e){try{await (0,r.oe)((0,r.JU)(o,"destinations",e)),this.deleteAllReviews(e)}catch(e){console.log(e)}}async addReview(e,t,i,n,a){let s=(0,r.hJ)(o,"destinations",e,"reviews"),l=(0,r.JU)(o,"destinations",e),c=(await (0,r.QT)(l)).data();try{await (0,r.r7)(l,{TotalRating:(null==c?void 0:c.TotalRating)+t,RatingCount:(null==c?void 0:c.RatingCount)+1}),await (0,r.ET)(s,{rating:t,comment:i,email:n,userID:a})}catch(e){console.error(e)}}async updateReview(e,t,i,n){let a=(0,r.JU)(o,"destinations",e,"reviews",t),s=(0,r.JU)(o,"destinations",e,"reviews",t),l=(await (0,r.QT)(s)).data(),c=(0,r.JU)(o,"destinations",e),d=(await (0,r.QT)(c)).data();try{await (0,r.r7)(c,{TotalRating:(null==d?void 0:d.TotalRating)+i-(null==l?void 0:l.rating)}),await (0,r.r7)(a,{rating:i,comment:n})}catch(e){console.error(e)}}async deleteReview(e,t){let i=(0,r.JU)(o,"destinations",e,"reviews",t),n=(await (0,r.QT)(i)).data(),a=(0,r.JU)(o,"destinations",e),s=(await (0,r.QT)(a)).data();try{await (0,r.r7)(a,{TotalRating:(null==s?void 0:s.TotalRating)-(null==n?void 0:n.rating),RatingCount:(null==s?void 0:s.RatingCount)-1}),await (0,r.oe)((0,r.JU)(o,"destinations",e,"reviews",t))}catch(e){console.error(e)}}getAuthInstance(){return d}async setUserDestination(e,t){let i=(0,r.hJ)(o,"user_destinations");try{await (0,r.ET)(i,{destinationID:t,userID:e})}catch(e){console.error("Error creating user document:",e)}}async removeUserDestination(e,t){(await (0,r.PL)((0,r.IO)((0,r.hJ)(o,"user_destinations"),(0,r.ar)("userID","==",e),(0,r.ar)("destinationID","==",t)))).forEach(async e=>{await (0,r.oe)(e.ref)})}async checkIfVisited(e,t){if("string"!=typeof e)return!1;try{return!(await (0,r.PL)((0,r.IO)((0,r.hJ)(o,"user_destinations"),(0,r.ar)("userID","==",e),(0,r.ar)("destinationID","==",t)))).empty}catch(e){return console.error("Error checking if destination is visited:",e),!1}}async deleteAllReviews(e){let t=(0,r.hJ)(o,"destinations",e,"reviews");try{(await (0,r.PL)(t)).forEach(async e=>{await (0,r.oe)(e.ref)})}catch(e){console.error(e)}}async getDestinationsWithVisited(e){let t=(0,r.hJ)(o,"destinations"),i=await (0,r.PL)(t);if(void 0!==e){let t=[];for(let n of i.docs)await this.checkIfVisited(null==e?void 0:e.uid,n.id).then(e=>{t.push({id:n.id,visited:e,...n.data()})});return t}return i.docs.map(e=>({id:e.id,visited:!1,...e.data()}))}}t.ZP=u},3438:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return y}});var n=i(7437),a=i(2265);i(950),i(6296);var s=i(703),r=e=>{let{country:t,city:i}=e,[r,l]=(0,a.useState)(0),[o,c]=(0,a.useState)([]);return(0,a.useEffect)(()=>{fetch("https://restcountries.com/v3.1/name/".concat(t)).then(e=>e.json()).then(e=>{let t=e[0].cca2,n="http://api.openweathermap.org/geo/1.0/direct?q=".concat(i,",").concat(t,"&limit=1&appid=971ff3c555137597d9b8ceea73588668");fetch(n).then(e=>e.json()).then(e=>{let t="https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=".concat(e[0].lat,"&lon=").concat(e[0].lon);fetch(t).then(e=>e.json()).then(e=>{l(e.properties.timeseries[0].data.instant.details.air_temperature),c(e.properties.timeseries[0].data.next_1_hours.summary.symbol_code)}).catch(()=>console.log("Error fetching weather data"))}).catch(()=>console.log("Error fetching geolocation"))}).catch(()=>console.log("Error fetching country code"))}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"temperatureContainer",children:[r,"\xb0C"]}),(0,n.jsx)("div",{className:"weatherIconContainer",children:0!=o.length?(0,n.jsx)(s.default,{src:"/weatherIcons/".concat(o,".png"),alt:"".concat(o),width:200,height:200,style:{width:"auto",height:"100%"}}):(0,n.jsx)(n.Fragment,{})})]})},l=i(685),o=i(2619);i(5739);var c=i(8024),d=i(7535),u=e=>{let{user:t,id:i,extraHandling:s}=e,[r,l]=(0,a.useState)(!1),u=()=>{(async()=>{try{let e=new o.ZP,n=await e.checkIfVisited(null==t?void 0:t.uid,i);l(n)}catch(e){console.error("Error checking if visited:",e)}})()};u(),(0,a.useEffect)(()=>{u()},[]);let h=()=>{new o.ZP().removeUserDestination(null==t?void 0:t.uid,i).then(()=>{console.log("User removed from destination's list:",i),s()})},m=async e=>{e.stopPropagation();try{let e=new o.ZP;r?e.getReviewForDestinationUser(null==t?void 0:t.uid,i).then(t=>{t.length?!confirm("You have written a review for this destination, and can not have a review for a destination you have not visited.\n If you continue, the review will be deleted.")||e.deleteReview(i,t[0].reviewID).then(()=>{h()}):h()}):(await e.setUserDestination(null==t?void 0:t.uid,i),console.log("User added to destination's list:",i)),l(!r)}catch(e){console.error("Error handling checkbox change:",e)}};return(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)(c.G,{className:"visitedIcon",icon:d.wJh,onClick:m,style:{color:"#63E6BE"}}):(0,n.jsx)(c.G,{className:"visitedIcon",icon:d.wJh,onClick:m,style:{color:"#c0c0c0"}})})},h=e=>{let{country:t,city:i,rating:s,imgURL:o,onReadMore:c,isLoggedIn:d,user:h,id:m}=e,[g,v]=(0,a.useState)({state:!1});return(0,n.jsxs)("div",{className:"box",id:"box",onClick:d?c:()=>alert("Please log in to read more"),children:[(0,n.jsx)("img",{src:o,alt:"Error loading image",className:"inner-div"}),(0,n.jsxs)("div",{className:"inner-div info-div",children:[(0,n.jsx)("h1",{children:i}),(0,n.jsx)("h2",{children:t})]}),(0,n.jsxs)("div",{className:"inner-div more-div",children:[(0,n.jsx)("div",{className:"rating-container",children:(0,n.jsx)(l.Z,{"data-testid":"rating",name:"average-rating",value:s,precision:.25,readOnly:!0})}),(0,n.jsx)("div",{className:"weather-container",children:(0,n.jsx)(r,{country:t,city:i})}),(0,n.jsxs)("div",{className:"button-container",children:[void 0!==h&&(0,n.jsx)(u,{user:h,id:m,extraHandling:()=>{}}),(0,n.jsx)("button",{onClick:d?c:()=>alert("Please log in to read more"),children:"Read More"})]})]})]})};i(4319);var m=e=>{let{categories:t,onFilterChange:i}=e,[s,r]=(0,a.useState)([]),l=e=>{let t=s.includes(e)?s.filter(t=>t!==e):[...s,e];r(t),i(t)};return(0,n.jsx)("div",{id:"filterPanel-container",children:Object.entries(t).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{id:"menu-container",children:[(0,n.jsx)("h4",{children:t}),(0,n.jsx)("div",{id:"checkbox-container",children:i.map((e,t)=>(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",value:e,checked:s.includes(e),onChange:()=>l(e)}),e]},t))})]},t)})})};i(6561);var g=i(7907);i(9559);var v=e=>{let{id:t,country:i,city:s,rating:h,tags:m,description:g,imgURL:v,admin:x,onClose:j,user:p,visited:f,onEdit:w,onDelete:b}=e,[y,N]=(0,a.useState)([]),[C,S]=(0,a.useState)(2.5),[k,D]=(0,a.useState)(""),[I,R]=(0,a.useState)(""),P=new o.ZP,[E,J]=(0,a.useState)(!1),[A,T]=(0,a.useState)(!1),[U,O]=(0,a.useState)(h),[L,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{P.getReviewsForDestination(t).then(e=>{N(JSON.parse(JSON.stringify(e)))}),J(f)},[]),(0,a.useEffect)(()=>{P.getDestination(t).then(e=>{O((null==e?void 0:e.RatingCount)==0?0:(null==e?void 0:e.TotalRating)/(null==e?void 0:e.RatingCount)),F(!1)})},[L]),(0,a.useEffect)(()=>{if(p){let e=y.filter(e=>e.userID===p.uid);0!==e.length&&(R(e[0].reviewID),D(e[0].comment),S(e[0].rating))}},[y]);let Z=e=>{D(e.target.value)},V=()=>{P.updateReview(t,I,C,k).then(()=>{P.getReviewsForDestination(t).then(e=>{N(JSON.parse(JSON.stringify(e)))}),F(!0),T(!1)})},_=()=>{P.deleteReview(t,I).then(()=>{B()})},B=()=>{P.getReviewsForDestination(t).then(e=>{N(JSON.parse(JSON.stringify(e)))}),F(!0),T(!1),R(""),D(""),S(2.5)},H=()=>{confirm("Are you sure you want to delete this review?\nClick either OK or Cancel.")&&_()};return(0,n.jsxs)("div",{id:"modal-container",className:"not-blur",children:[(0,n.jsx)("button",{id:"x-button",onClick:j,className:"not-blur",children:"X"}),(0,n.jsx)("img",{src:v,alt:"Error",className:"not-blur"}),(0,n.jsxs)("div",{id:"admin-buttons",className:"not-blur",children:[x&&(0,n.jsxs)("button",{id:"edit-button",onClick:w,className:"not-blur",children:["Edit ",(0,n.jsx)(c.G,{id:"icon",className:"not-blur",icon:d.Yai})]}),x&&(0,n.jsxs)("button",{id:"delete-button",className:"not-blur",onClick:function(){confirm("Are you sure you want to delete this destination?\nClick either OK or Cancel.")&&b&&b()},children:["Delete",(0,n.jsx)(c.G,{id:"icon",className:"not-blur",icon:d.Vui})]})]}),(0,n.jsxs)("div",{id:"info-container",className:"not-blur",children:[(0,n.jsx)("div",{id:"title-container",className:"not-blur",children:(0,n.jsxs)("h1",{className:"not-blur",children:[s,", ",i]})}),(0,n.jsx)("div",{id:"visited-container",className:"addPadding not-blur",children:(0,n.jsx)(u,{id:t,user:p,extraHandling:()=>B()})}),(0,n.jsx)("div",{id:"weather-display-container",className:"addPadding not-blur",children:(0,n.jsx)(r,{country:i,city:s})}),(0,n.jsx)("div",{id:"rating-container",className:"addPadding not-blur",children:(0,n.jsx)(l.Z,{name:"average-rating",precision:.25,value:U,readOnly:!0})}),(0,n.jsx)("div",{id:"tag-container",className:"addPadding not-blur",children:m.length?"Tags: "+(null==m?void 0:m.join(", ")):"There are no tags for this destination"}),(0,n.jsx)("div",{id:"description-container",className:"addPadding not-blur",children:g||"No description for this destiantion"}),I?A?(0,n.jsx)("div",{children:y.filter(e=>e.reviewID===I).map(e=>(0,n.jsxs)("div",{id:"myrating-container",className:"addPadding not-blur",children:["Edit your review:",(0,n.jsx)("div",{id:"starRating",className:"not-blur",children:(0,n.jsx)(l.Z,{name:"half-rating",defaultValue:e.rating,precision:.5,onChange:(e,t)=>S(t)})}),(0,n.jsx)("textarea",{id:"review-destinations",rows:1,onChange:Z,defaultValue:e.comment}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c.G,{id:"back-review",className:"not-blur",icon:d.a0w,onClick:()=>T(!1)}),(0,n.jsx)(c.G,{id:"update-review",className:"not-blur",icon:d.fV7,onClick:V}),(0,n.jsx)(c.G,{id:"delete-review",className:"not-blur",icon:d.Vui,onClick:H})]})]},e.reviewID))}):(0,n.jsxs)("div",{id:"reviewfeed-container",className:"addPadding not-blur",children:[(0,n.jsx)("h3",{children:"My Review"}),(0,n.jsx)("hr",{}),y.filter(e=>e.reviewID===I).map(e=>(0,n.jsxs)("div",{style:{justifyContent:"space-between"},children:[(0,n.jsxs)("div",{id:"top-of-review",children:[(0,n.jsx)("div",{style:{opacity:.5},children:e.email}),(0,n.jsx)(c.G,{id:"edit-button",className:"not-blur",icon:d.Yai,onClick:()=>T(!0)})]}),(0,n.jsx)(l.Z,{style:{opacity:.5},name:"half-rating",value:e.rating,precision:.5,readOnly:!0}),(0,n.jsx)("div",{style:{opacity:.5},children:e.comment})]},e.reviewID))]}):(0,n.jsxs)("div",{id:"myrating-container",className:"addPadding not-blur",children:["Add review:",(0,n.jsx)("div",{id:"starRating",className:"not-blur",children:(0,n.jsx)(l.Z,{name:"half-rating",defaultValue:2.5,precision:.5,onChange:(e,t)=>S(t)})}),(0,n.jsx)("textarea",{id:"review-destinations",rows:1,value:k,onChange:Z,placeholder:"Optional comment"}),(0,n.jsx)("button",{id:"submit-review",className:"addPadding not-blur",onClick:()=>{p&&!I&&P.checkIfVisited(p.uid,t).then(e=>{e?P.addReview(t,C,k,p.email,p.uid).then(()=>{F(!0)}).then(()=>{P.getReviewsForDestination(t).then(e=>{N(JSON.parse(JSON.stringify(e)))})}):alert("You can not give a review on a destination you have not visited.")})},children:"Submit"})]}),0!=y.filter(e=>""!==e.comment&&e.comment&&e.reviewID!==I).length&&(0,n.jsxs)("div",{id:"reviewfeed-container",className:"addPadding not-blur",children:[(0,n.jsx)("h3",{children:"All Reviews"}),y.filter(e=>""!==e.comment&&e.comment&&e.reviewID!==I).map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)("hr",{}),(0,n.jsxs)("div",{id:"singlereview-container",children:[(0,n.jsx)("div",{id:"top-of-review",children:e.email}),(0,n.jsx)(l.Z,{name:"half-rating",value:e.rating,precision:.5,readOnly:!0}),(0,n.jsx)("div",{children:e.comment})]})]},e.reviewID))]})]})]})};i(7126);var x=e=>{let{onClose:t,checkDuplicates:i,destinationList:s}=e,r=new o.ZP,[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[x,j]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[w,b]=(0,a.useState)(""),[y,N]=(0,a.useState)([]),C={Activities:["Hiking","Skiing","Sightseeing"],"Destination type":["City","Beach","Culture","Safari","Historical","Active"]},S=async()=>{let e=[];i(g,h,s)?b("This destination already exists"):""!==h&&""!==g&&""!==x&&""!==d&&""!==l?(e.push(l),e.push(d),y.map(t=>e.push(t)),await r.addDestination(h,g,x,e,p),null==t||t()):b("Fill inn all fields")};return(0,n.jsxs)("div",{id:"addDestination",className:"not-blur",children:[(0,n.jsx)("button",{id:"x-button",onClick:t,className:"not-blur",children:"X"}),(0,n.jsxs)("div",{id:"addDestination-inner",className:"not-blur",children:[(0,n.jsx)("h1",{className:"not-blur",children:"New travel destination"}),(0,n.jsx)("h5",{id:"statusMessage",className:"not-blur",children:w}),(0,n.jsxs)("form",{className:"not-blur",children:[(0,n.jsxs)("label",{className:"not-blur",children:["City:",(0,n.jsx)("input",{name:"city",className:"not-blur",onChange:e=>m(e.target.value)})]}),(0,n.jsxs)("label",{className:"not-blur",children:["Country:",(0,n.jsx)("input",{name:"country",className:"not-blur",onChange:e=>v(e.target.value)})]}),(0,n.jsxs)("label",{className:"not-blur",children:["Image url:",(0,n.jsx)("input",{name:"imgURL",className:"not-blur",onChange:e=>j(e.target.value)})]}),(0,n.jsx)("h3",{className:"not-blur",children:"Apply tags"}),(0,n.jsxs)("select",{className:"not-blur",defaultValue:"",onChange:e=>c(e.target.value),children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"continent"}),(0,n.jsx)("option",{value:"africa",children:"Africa"}),(0,n.jsx)("option",{value:"asia",children:"Asia"}),(0,n.jsx)("option",{value:"europe",children:"Europe"}),(0,n.jsx)("option",{value:"northAmerica",children:"North-America"}),(0,n.jsx)("option",{value:"southAmerica",children:"South-America"}),(0,n.jsx)("option",{value:"oceania",children:"Oceania"})]}),(0,n.jsxs)("select",{className:"not-blur",defaultValue:"",onChange:e=>u(e.target.value),children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"climate"}),(0,n.jsx)("option",{value:"continental",children:"Continental"}),(0,n.jsx)("option",{value:"dry",children:"Dry"}),(0,n.jsx)("option",{value:"polar",children:"Polar"}),(0,n.jsx)("option",{value:"temperate",children:"Temperate"}),(0,n.jsx)("option",{value:"tropical",children:"Tropical"})]}),(0,n.jsx)("div",{className:"not-blur",id:"checkbox-container",children:(()=>{let e=e=>{let t=e.target.value;e.target.checked?N(e=>[...e,t]):N(e=>e.filter(e=>e!==t))};return(0,n.jsx)(n.Fragment,{children:Object.entries(C).map(t=>{let[i,a]=t;return(0,n.jsxs)("div",{className:"not-blur",children:[(0,n.jsx)("h4",{className:"not-blur",children:i}),(0,n.jsx)("div",{className:"not-blur",id:"category-checkbox-container",children:a.map(t=>(0,n.jsxs)("label",{className:"not-blur",children:[(0,n.jsx)("input",{type:"checkbox",className:"not-blur",value:t,onChange:e}),t]},t))})]},i)})})})()})]}),(0,n.jsx)("h4",{className:"not-blur",children:"Description"}),(0,n.jsx)("textarea",{className:"not-blur",rows:12,cols:60,style:{resize:"none"},onChange:e=>f(e.target.value)}),(0,n.jsx)("button",{id:"addButton",className:"not-blur",onClick:S,children:" Add new destination "})]})]})};i(2780);var j=e=>{let{id:t,city:i,country:s,tags:r,currentDescription:l,currentImgUrl:c,onClose:d}=e,u=new o.ZP,[h,m]=(0,a.useState)(""),[g,v]=(0,a.useState)(c),[x,j]=(0,a.useState)(l),[p,f]=(0,a.useState)(""),[w,b]=(0,a.useState)(r),[y,N]=(0,a.useState)(!1),C={Activities:["Hiking","Skiing","Sightseeing"],"Destination type":["City","Beach","Culture","Safari","Historical","Active"]},S=["continental","dry","polar","temperate","tropical"],k=e=>{m(e),b(e=>e.filter(e=>!S.includes(e))),b(t=>[...t,e])},D=()=>{for(let e=0;e<w.length;e++)if(!r.includes(w[e]))return!0;for(let e=0;e<r.length;e++)if(!w.includes(r[e]))return!0;return""!=h||l!=x},I=async()=>{D()?(await u.editDestination(t,g,w,x),null==d||d()):f("No changes were made")},R=e=>w.indexOf(e)>-1;return(0,n.jsxs)("div",{id:"editBox",className:"not-blur",children:[(0,n.jsx)("h1",{className:"not-blur",children:"Edit destination"}),(0,n.jsx)("h5",{id:"statusmessage",className:"not-blur",children:p}),(0,n.jsx)("button",{id:"x-button",onClick:d,className:"not-blur",children:"X"}),(0,n.jsxs)("div",{id:"editDestination",className:"not-blur",children:[(0,n.jsxs)("div",{id:"display-current-destination",className:"not-blur",children:[(0,n.jsx)("img",{src:g,alt:"Error",className:"not-blur"}),(0,n.jsxs)("h2",{className:"not-blur",children:[i,", ",s]})]}),(0,n.jsxs)("div",{id:"editDestination-inner",className:"not-blur",children:[(0,n.jsxs)("form",{className:"not-blur",children:[(0,n.jsxs)("label",{className:"not-blur",children:["Image url:",(0,n.jsx)("input",{name:"imgURL",id:"imgURL",className:"not-blur",onChange:e=>v(e.target.value)})]}),(0,n.jsxs)("select",{className:"not-blur",defaultValue:"",onChange:e=>k(e.target.value),children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"climate"}),(0,n.jsx)("option",{value:"continental",children:"Continental"}),(0,n.jsx)("option",{value:"dry",children:"Dry"}),(0,n.jsx)("option",{value:"polar",children:"Polar"}),(0,n.jsx)("option",{value:"temperate",children:"Temperate"}),(0,n.jsx)("option",{value:"tropical",children:"Tropical"})]}),(0,n.jsx)("div",{className:"not-blur",id:"edit-checkboxes",children:(()=>{let e=e=>{let t=e.target.value;e.target.checked?w.includes(t)||b(e=>[...e,t]):b(e=>e.filter(e=>e!==t))};return(0,n.jsx)(n.Fragment,{children:Object.entries(C).map(t=>{let[i,a]=t;return(0,n.jsxs)("div",{className:"not-blur",children:[(0,n.jsx)("h4",{className:"not-blur",children:i}),(0,n.jsx)("div",{className:"not-blur",id:"category-checkbox-container",children:a.map(t=>(0,n.jsxs)("label",{className:"not-blur",children:[(0,n.jsx)("input",{type:"checkbox",className:"not-blur",defaultChecked:R(t),value:t,onChange:e}),t]},t))})]},i)})})})()})]}),(0,n.jsx)("h4",{className:"not-blur",children:"Description"}),(0,n.jsx)("textarea",{className:"not-blur",defaultValue:l,rows:12,cols:60,style:{resize:"none"},onChange:e=>j(e.target.value)}),(0,n.jsx)("button",{id:"editButton",className:"not-blur",onClick:I,children:"Update destination"})]})]})]})},p=i(4905);i(8467);var f=e=>{let{admin:t}=e,[i,s]=(0,a.useState)(void 0);return(0,n.jsxs)("div",{id:"fileUploader",children:[t&&(0,n.jsx)("input",{type:"file",onChange:e=>{e.target.files&&e.target.files.length>0&&s(e.target.files[0])},accept:".png, .jpg, .gif"}),t&&(0,n.jsx)("button",{onClick:()=>{if(!i){alert("Please choose a file first!");return}let e=new Date().getTime(),t="".concat(e,"_").concat(i.name),n=(0,p.iH)(o.tO,"/files/".concat(t)),a=new Blob([i]),s=(0,p.B0)(n,a);s.on("state_changed",e=>{e.bytesTransferred,e.totalBytes},e=>console.log(e),async()=>{await (0,p.Jt)(s.snapshot.ref),window.location.reload()})},children:"Upload ad"})]})};i(9962);var w=e=>{let{admin:t}=e,[i,s]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,p.cF)(),t=(0,p.iH)(e,"files/");(0,p.aF)(t).then(e=>{Promise.all(e.items.map(e=>(0,p.Jt)(e).catch(e=>(console.log(e),"")))).then(e=>s(e.filter(e=>""!==e))).catch(e=>console.log(e))}).catch(e=>console.log(e))},[]);let r=e=>{let t=(0,p.cF)(),i=(0,p.iH)(t,e);(0,p.oq)(i).then(()=>{console.log("File deleted successfully"),s(t=>t.filter(t=>t!==e))}).catch(e=>{console.error("Error deleting file: ",e)})},l=i.slice().reverse();return(0,n.jsx)("div",{id:"adColumn",children:l.map((e,i)=>(0,n.jsxs)("div",{id:"delete",children:[(0,n.jsx)("img",{src:e,alt:"File ".concat(i+1)}),t&&(0,n.jsx)("button",{onClick:()=>r(e),children:(0,n.jsx)(c.G,{id:"icon",className:"not-blur",icon:d.Vui})})]},i))})},b=()=>{let[e,t]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(0),[u,p]=(0,a.useState)(0),[b,y]=(0,a.useState)(""),[N,C]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[D,I]=(0,a.useState)(!1);(0,g.useRouter)();let[R,P]=(0,a.useState)(),[E,J]=(0,a.useState)(!1),[A,T]=(0,a.useState)(!1),[U,O]=(0,a.useState)(""),[L,F]=(0,a.useState)(null);(0,a.useEffect)(()=>{var e;O(null===(e=localStorage.getItem("user"))||void 0===e?void 0:e.replace(/"/g,""))},[]),(0,a.useEffect)(()=>{o.I8.onAuthStateChanged(e=>{e?P(e):(P(void 0),l(!1),C(!1),I(!1))}),"theamariabruno@gmail.com"===U||"juliadai03@gmail.com"===U||"adrianhsolberg@gmail.com"===U||"hallvardfuttererwannebo@gmail.com"===U||"sand.rasmusw@gmail.com"===U?T(!0):T(!1)},[S,E,U]),(0,a.useEffect)(()=>{new o.ZP().getDestinations().then(e=>{s(e),k(!1)})},[S]);let Z=e=>{d(e),l(!0),p(window.scrollY),window.scrollTo(0,0)},V=(e,t)=>{if(void 0===t||null==t||t.length<=0)return e;let i=t.map(e=>e.toLowerCase());return e.filter(e=>{let t=e.category.map(e=>e.toLowerCase());return i.every(e=>t.includes(e))})},_=(e,t)=>e.filter(e=>{let i=t.toLowerCase(),n=e.city.toLowerCase(),a=e.country.toLowerCase();return!i||n.includes(i)||a.includes(i)}),B=(e,t,i)=>{let n=_(e,t),a=_(e,i);return n.length>0&&a.length>0},H=()=>{d(0),l(!1),window.scrollTo(0,u),p(0),k(!0)},G=()=>{C(!1),k(!0),window.scrollTo(0,u)},M=()=>{I(!0),l(!1)},z=()=>{I(!1),k(!0)},Q=e=>{(new o.ZP).deleteDestination(e),k(!0),H()},Y=_(V(i,e),b)[c];return(0,n.jsxs)("div",{id:"container",className:r||N||D?"blur-background":void 0,children:[(r||N||D)&&(0,n.jsx)("div",{className:"overlay"}),r&&R&&(0,n.jsx)(v,{id:Y.id,city:Y.city,country:Y.country,rating:0==Y.RatingCount?0:Y.TotalRating/Y.RatingCount,tags:Y.category,description:Y.description,imgURL:Y.imgUrl,user:R,admin:A,onEdit:()=>M(),onDelete:()=>Q(_(V(i,e),b)[c].id),onClose:()=>H()}),D&&(0,n.jsx)(j,{city:Y.city,country:Y.country,tags:Y.category,currentDescription:Y.description,currentImgUrl:Y.imgUrl,id:Y.id,onClose:()=>z(),visited:Y.visited}),!!R&&(0,n.jsx)("button",{id:"addDestinationButton",onClick:()=>C(!0),disabled:r||N,className:r||N?"disable-button":void 0,children:"Add new travel destination"}),(0,n.jsx)("div",{id:"search-container",children:(0,n.jsx)("input",{type:"text",value:b,onChange:e=>{y(e.target.value)},placeholder:"Search destinations"})}),(0,n.jsx)("div",{id:"filter-container",children:(0,n.jsx)(m,{categories:{Activities:["Hiking","Skiing","Sightseeing"],Climate:["Tropical","Dry","Continental","Polar","Temperate"],"Destination type":["City","Beach","Culture","Safari","Historical","Active"],Continent:["Europe","Asia","Africa","North America","South America","Oceania"]},onFilterChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t(e)}})}),(0,n.jsx)("div",{id:"fileUploader",children:(0,n.jsx)(f,{admin:A})}),(0,n.jsx)("div",{id:"ad-container",children:(0,n.jsx)("div",{id:"displayAds",children:(0,n.jsx)(w,{admin:A})})}),(0,n.jsx)("div",{id:"feed-container",children:(()=>{let t=_(V(i,e),b);return 0===t.length?(0,n.jsx)("h1",{children:"No destinations found"}):(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>(0,n.jsx)(h,{city:e.city,country:e.country,rating:0==e.RatingCount?0:e.TotalRating/e.RatingCount,imgURL:e.imgUrl,onReadMore:()=>Z(t),isLoggedIn:!!R,user:R,id:e.id},t))})})()}),N&&(0,n.jsx)(x,{checkDuplicates:(e,t)=>B(i,e,t),destinationList:i,onClose:()=>G()})]})};function y(){return new o.ZP,(0,n.jsx)("div",{children:(0,n.jsx)(b,{})})}i(4720)},4720:function(e,t,i){"use strict";i.r(t),i.d(t,{Header:function(){return c},default:function(){return d}});var n=i(7437),a=i(2265),s=i(8792);i(2046);var r=i(2619),l=i(2730),o=()=>{let[e,t]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=r.ZP.getAuth().onAuthStateChanged(e=>{e?t(!0):t(!1)});return()=>e()},[e]);let i=async()=>{let e=new l.hJ;e.setCustomParameters({prompt:"select_account"});try{let i=(await (0,l.rh)(r.ZP.getAuth(),e)).user;i&&(i.uid,t(!0),localStorage.setItem("user",JSON.stringify(i.email))),window.location.reload()}catch(e){console.error(e)}},s=async()=>{try{await (0,l.w7)(r.ZP.getAuth()),localStorage.setItem("user",""),t(!1),window.location.reload()}catch(e){console.error(e)}};return(0,n.jsx)("div",{children:e?(0,n.jsx)("button",{onClick:s,children:"Sign out"}):(0,n.jsx)("button",{onClick:i,children:"Sign in with Google"})})};i(9581),i(9847);let c=()=>{let[e,t]=(0,a.useState)(void 0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("theme");var i=document.body;"dark"===e?(i.classList.add("dark-mode"),t(!0)):(i.classList.remove("dark-mode"),t(!1))},[]),void 0===e)?null:(0,n.jsxs)("header",{id:"navbar",children:[(0,n.jsx)(s.default,{href:"/",className:"link",children:(0,n.jsx)("div",{className:"navbar-start",style:{fontFamily:"Arial",fontSize:"18px"},children:"Travel Buddy"})}),(0,n.jsxs)("div",{className:"navbar-end",style:{display:"flex"},children:[(0,n.jsx)(s.default,{href:"/MyProfile",className:"link",children:(0,n.jsx)("div",{className:"navbar-start",style:{fontFamily:"Arial",fontSize:"18px",paddingRight:"20px",justifyContent:"space-between",paddingTop:"10px"},children:"My Destinations"})}),(0,n.jsxs)("label",{className:"switch",children:[(0,n.jsx)("input",{id:"darkmode-button",defaultChecked:e,onClick:()=>{var i=document.body;e?(i.classList.remove("dark-mode"),localStorage.setItem("theme","light")):(i.classList.add("dark-mode"),localStorage.setItem("theme","dark")),t(e=>!e)},type:"checkbox"}),(0,n.jsx)("span",{className:"slider round"})]}),(0,n.jsx)(o,{})]})]})};var d=c},7126:function(){},9847:function(){},950:function(){},9559:function(){},2780:function(){},8467:function(){},4319:function(){},5739:function(){},2046:function(){},6561:function(){},6296:function(){},9962:function(){},9581:function(){}},function(e){e.O(0,[358,380,676,228,660,971,69,744],function(){return e(e.s=2880)}),_N_E=e.O()}]);