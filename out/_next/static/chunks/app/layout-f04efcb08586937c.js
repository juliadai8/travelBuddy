(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1699:function(t,e,a){Promise.resolve().then(a.t.bind(a,3385,23)),Promise.resolve().then(a.t.bind(a,3649,23)),Promise.resolve().then(a.bind(a,4720))},2619:function(t,e,a){"use strict";a.d(e,{I8:function(){return c},tO:function(){return l}});var i=a(6142),n=a(2730),s=a(4905),r=a(8121);let o=(0,i.ZF)({apiKey:"AIzaSyBWui1W0CBRAzvrMqHCOBUc3hMkmo3KkXw",authDomain:"tdt4140-prosjekt.firebaseapp.com",databaseURL:"https://tdt4140-prosjekt-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tdt4140-prosjekt",storageBucket:"tdt4140-prosjekt.appspot.com",messagingSenderId:"807771308285",appId:"1:807771308285:web:43ebb655b020317c987e94"}),d=(0,r.ad)(o),l=(0,s.cF)(o),c=(0,n.v0)(o);class u{static getAuth(){return c}static getStorage(){return l}async getDestinations(){let t=(0,r.hJ)(d,"destinations");return(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}async getDestination(t){let e=(0,r.JU)(d,"destinations",t);return(await (0,r.QT)(e)).data()}async getReviewForDestinationUser(t,e){let a=(0,r.hJ)(d,"destinations",e,"reviews");return(await (0,r.PL)(a)).docs.map(t=>({reviewID:t.id,...t.data()})).filter(e=>e.userID===t)}async getReviewsForDestination(t){let e=(0,r.hJ)(d,"destinations",t,"reviews");return(await (0,r.PL)(e)).docs.map(t=>({reviewID:t.id,...t.data()}))}async addDestination(t,e,a,i,n){let s=(0,r.hJ)(d,"destinations");try{let o=await (0,r.ET)(s,{city:t,country:e,imgUrl:a,category:i,description:n||"",RatingCount:0,TotalRating:0}),d=(0,r.hJ)(o,"reviews");await (0,r.ET)(d,{})}catch(t){console.error(t)}}async getDestinationIDsForUser(t){let e=(0,r.hJ)(d,"user_destinations"),a=(0,r.IO)(e,(0,r.ar)("userID","==",t));return(await (0,r.PL)(a)).docs.map(t=>t.data().destinationID)}async getVisitedDestinations(t){let e=await t;if(0==e.length||null==e||void 0==e)return[];let a=(0,r.hJ)(d,"destinations"),i=(0,r.IO)(a,(0,r.ar)((0,r.Jm)(),"in",e));return(await (0,r.PL)(i)).docs.map(t=>({id:t.id,...t.data()}))}async editDestination(t,e,a,i){let n=(0,r.JU)(d,"destinations",t);try{await (0,r.r7)(n,{imgUrl:e,category:a,description:i})}catch(t){console.error(t)}}async deleteDestination(t){try{await (0,r.oe)((0,r.JU)(d,"destinations",t)),this.deleteAllReviews(t)}catch(t){console.log(t)}}async addReview(t,e,a,i,n){let s=(0,r.hJ)(d,"destinations",t,"reviews"),o=(0,r.JU)(d,"destinations",t),l=(await (0,r.QT)(o)).data();try{await (0,r.r7)(o,{TotalRating:(null==l?void 0:l.TotalRating)+e,RatingCount:(null==l?void 0:l.RatingCount)+1}),await (0,r.ET)(s,{rating:e,comment:a,email:i,userID:n})}catch(t){console.error(t)}}async updateReview(t,e,a,i){let n=(0,r.JU)(d,"destinations",t,"reviews",e),s=(0,r.JU)(d,"destinations",t,"reviews",e),o=(await (0,r.QT)(s)).data(),l=(0,r.JU)(d,"destinations",t),c=(await (0,r.QT)(l)).data();try{await (0,r.r7)(l,{TotalRating:(null==c?void 0:c.TotalRating)+a-(null==o?void 0:o.rating)}),await (0,r.r7)(n,{rating:a,comment:i})}catch(t){console.error(t)}}async deleteReview(t,e){let a=(0,r.JU)(d,"destinations",t,"reviews",e),i=(await (0,r.QT)(a)).data(),n=(0,r.JU)(d,"destinations",t),s=(await (0,r.QT)(n)).data();try{await (0,r.r7)(n,{TotalRating:(null==s?void 0:s.TotalRating)-(null==i?void 0:i.rating),RatingCount:(null==s?void 0:s.RatingCount)-1}),await (0,r.oe)((0,r.JU)(d,"destinations",t,"reviews",e))}catch(t){console.error(t)}}getAuthInstance(){return c}async setUserDestination(t,e){let a=(0,r.hJ)(d,"user_destinations");try{await (0,r.ET)(a,{destinationID:e,userID:t})}catch(t){console.error("Error creating user document:",t)}}async removeUserDestination(t,e){(await (0,r.PL)((0,r.IO)((0,r.hJ)(d,"user_destinations"),(0,r.ar)("userID","==",t),(0,r.ar)("destinationID","==",e)))).forEach(async t=>{await (0,r.oe)(t.ref)})}async checkIfVisited(t,e){if("string"!=typeof t)return!1;try{return!(await (0,r.PL)((0,r.IO)((0,r.hJ)(d,"user_destinations"),(0,r.ar)("userID","==",t),(0,r.ar)("destinationID","==",e)))).empty}catch(t){return console.error("Error checking if destination is visited:",t),!1}}async deleteAllReviews(t){let e=(0,r.hJ)(d,"destinations",t,"reviews");try{(await (0,r.PL)(e)).forEach(async t=>{await (0,r.oe)(t.ref)})}catch(t){console.error(t)}}async getDestinationsWithVisited(t){let e=(0,r.hJ)(d,"destinations"),a=await (0,r.PL)(e);if(void 0!==t){let e=[];for(let i of a.docs)await this.checkIfVisited(null==t?void 0:t.uid,i.id).then(t=>{e.push({id:i.id,visited:t,...i.data()})});return e}return a.docs.map(t=>({id:t.id,visited:!1,...t.data()}))}}e.ZP=u},4720:function(t,e,a){"use strict";a.r(e),a.d(e,{Header:function(){return l},default:function(){return c}});var i=a(7437),n=a(2265),s=a(8792);a(2046);var r=a(2619),o=a(2730),d=()=>{let[t,e]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let t=r.ZP.getAuth().onAuthStateChanged(t=>{t?e(!0):e(!1)});return()=>t()},[t]);let a=async()=>{let t=new o.hJ;t.setCustomParameters({prompt:"select_account"});try{let a=(await (0,o.rh)(r.ZP.getAuth(),t)).user;a&&(a.uid,e(!0),localStorage.setItem("user",JSON.stringify(a.email))),window.location.reload()}catch(t){console.error(t)}},s=async()=>{try{await (0,o.w7)(r.ZP.getAuth()),localStorage.setItem("user",""),e(!1),window.location.reload()}catch(t){console.error(t)}};return(0,i.jsx)("div",{children:t?(0,i.jsx)("button",{onClick:s,children:"Sign out"}):(0,i.jsx)("button",{onClick:a,children:"Sign in with Google"})})};a(9581),a(9847);let l=()=>{let[t,e]=(0,n.useState)(void 0);return((0,n.useEffect)(()=>{let t=localStorage.getItem("theme");var a=document.body;"dark"===t?(a.classList.add("dark-mode"),e(!0)):(a.classList.remove("dark-mode"),e(!1))},[]),void 0===t)?null:(0,i.jsxs)("header",{id:"navbar",children:[(0,i.jsx)(s.default,{href:"/",className:"link",children:(0,i.jsx)("div",{className:"navbar-start",style:{fontFamily:"Arial",fontSize:"18px"},children:"Travel Buddy"})}),(0,i.jsxs)("div",{className:"navbar-end",style:{display:"flex"},children:[(0,i.jsx)(s.default,{href:"/MyProfile",className:"link",children:(0,i.jsx)("div",{className:"navbar-start",style:{fontFamily:"Arial",fontSize:"18px",paddingRight:"20px",justifyContent:"space-between",paddingTop:"10px"},children:"My Destinations"})}),(0,i.jsxs)("label",{className:"switch",children:[(0,i.jsx)("input",{id:"darkmode-button",defaultChecked:t,onClick:()=>{var a=document.body;t?(a.classList.remove("dark-mode"),localStorage.setItem("theme","light")):(a.classList.add("dark-mode"),localStorage.setItem("theme","dark")),e(t=>!t)},type:"checkbox"}),(0,i.jsx)("span",{className:"slider round"})]}),(0,i.jsx)(d,{})]})]})};var c=l},3385:function(){},9847:function(){},2046:function(){},9581:function(){},3649:function(t){t.exports={style:{fontFamily:"'__Inter_0f0813', '__Inter_Fallback_0f0813'",fontStyle:"normal"},className:"__className_0f0813"}}},function(t){t.O(0,[358,380,228,971,69,744],function(){return t(t.s=1699)}),_N_E=t.O()}]);